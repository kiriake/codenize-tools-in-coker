# -*- mode: ruby -*-
# vi: set ft=ruby :
ec2 "vpc-f13c1996" do
  security_group "alftest" do
    description "alftest"

    ingress do
      permission :tcp, 22..22 do
        ip_ranges(
          "210.227.234.114/32",
          "54.64.137.251/32"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end

  security_group "default" do
    description "default VPC security group"

    ingress do
      permission :any do
        groups(
          "default"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end
end

ec2 "vpc-05cb0bfec18dd78d4" do
  security_group "c-yamaguchi-dev-web" do
    description "c-yamaguchi-dev-web"

    tags(
      "Name" => "c-yamaguchi-dev-web"
    )

    ingress do
      permission :tcp, 0..65535 do
        ip_ranges(
          "0.0.0.0/0",
          "210.227.234.114/32"
        )
      end
      permission :tcp, 22..22 do
        ip_ranges(
          "210.227.234.114/32"
        )
      end
      permission :tcp, 80..80 do
        ip_ranges(
          "210.227.234.114/32"
        )
      end
      permission :udp, 0..65535 do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end

  security_group "default" do
    description "default VPC security group"

    tags(
      "Name" => "c-yamaguchi-dev-common"
    )

    ingress do
      permission :any do
        groups(
          "default"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end
end

ec2 "vpc-0b08cf19da9f425f6" do
  security_group "default" do
    description "default VPC security group"

    ingress do
      permission :any do
        groups(
          "default"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end

  security_group "sg_sawada_stg_jump01" do
    description "sg_sawada_stg_jump01"

    ingress do
      permission :tcp, 22..22 do
        ip_ranges(
          "210.227.234.114/32"
        )
      end
      permission :tcp, 80..80 do
        ip_ranges(
          "210.227.234.114/32"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end
end

ec2 "vpc-02632e7dbd8df0241" do
  security_group "default" do
    description "default VPC security group"

    tags(
      "Name" => "kiriake-default"
    )

    ingress do
      permission :any do
        groups(
          "default"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end

  security_group "kiriake-ec2-sg" do
    description "For EC2"

    tags(
      "aws:cloudformation:stack-name" => "kiriake-test-stack",
      "owner" => "kiriake",
      "aws:cloudformation:logical-id" => "SecurityGroupEc2",
      "Name" => "kiriake-ec2-sg",
      "aws:cloudformation:stack-id" => "arn:aws:cloudformation:ap-northeast-1:646067214529:stack/kiriake-test-stack/b2462ac0-3e66-11e9-a59f-066cec78e1f8"
    )

    ingress do
      permission :tcp, 0..65535 do
        groups(
          "kiriake-elb-sg"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end

  security_group "kiriake-ecs-alb" do
    description "kiriake-ecs-alb"

    tags(
      "Name" => "kiriake-ecs-alb"
    )

    ingress do
      permission :tcp, 80..80 do
        ip_ranges(
          "210.227.234.114/32"
        )
      end
      permission :tcp, 443..443 do
        ip_ranges(
          "210.227.234.114/32"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end

  security_group "kiriake-ecs-alb-sg" do
    description "kiriake-ecs-alb-sg"

    ingress do
      permission :tcp, 80..80 do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end

  security_group "kiriake-ecs-nginx" do
    description "2019-03-01T10:29:47.934Z"

    ingress do
      permission :tcp, 80..80 do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end

  security_group "kiriake-elb-sg" do
    description "For ELB"

    tags(
      "owner" => "kiriake",
      "Name" => "kiriake-elb-sg",
      "aws:cloudformation:stack-id" => "arn:aws:cloudformation:ap-northeast-1:646067214529:stack/kiriake-test-stack/b2462ac0-3e66-11e9-a59f-066cec78e1f8",
      "aws:cloudformation:stack-name" => "kiriake-test-stack",
      "aws:cloudformation:logical-id" => "SecurityGroupElb"
    )

    ingress do
      permission :tcp, 0..65535 do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end

  security_group "kiriake-nginx-rails" do
    description "2019-03-04T06:57:49.797Z"

    ingress do
      permission :tcp, 80..80 do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end

  security_group "launch-wizard-1" do
    description "launch-wizard-1 created 2019-03-19T18:09:35.382+09:00"

    ingress do
      permission :tcp, 22..22 do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end

  security_group "yamashita-dev-ec2-sg" do
    description "yamashita-dev-ec2-sg"

    ingress do
      permission :tcp, 22..22 do
        ip_ranges(
          "210.227.234.114/32"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end
end

ec2 "vpc-0da6797d3f963f08d" do
  security_group "default" do
    description "default VPC security group"

    ingress do
      permission :any do
        groups(
          "default"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end

  security_group "t-masuda-linux" do
    description "launch-wizard-1 created 2019-01-30T11:50:21.845+09:00"

    ingress do
      permission :any do
        ip_ranges(
          "172.0.0.0/16"
        )
      end
      permission :tcp, 22..22 do
        ip_ranges(
          "210.227.234.114/32"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end
end

ec2 "vpc-01286b8d2b812cc0a" do
  security_group "default" do
    description "default VPC security group"

    ingress do
      permission :any do
        groups(
          "default"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end

  security_group "s-takahashi-ec2-sg" do
    description "for EC2"

    tags(
      "Name" => "s-takahashi-ec2-sg",
      "owner" => "s-takahashi"
    )

    ingress do
      permission :tcp, 22..22 do
        ip_ranges(
          "210.227.234.114/32"
        )
      end
      permission :tcp, 80..80 do
        ip_ranges(
          "10.1.0.0/16"
        )
        groups(
          "s-takahashi-elb-sg"
        )
      end
      permission :tcp, 443..443 do
        ip_ranges(
          "10.1.0.0/16"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end

  security_group "s-takahashi-elb-sg" do
    description "for ELB"

    tags(
      "Name" => "s-takahashi-elb-sg",
      "owner" => "s-takahashi"
    )

    ingress do
      permission :tcp, 80..80 do
        ip_ranges(
          "210.227.234.114/32"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end
end

ec2 "vpc-084d32930318bb364" do
  security_group "default" do
    description "default VPC security group"

    ingress do
      permission :any do
        groups(
          "default"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end

  security_group "kitchin-login" do
    description "kitchen-login"

    tags(
      "Name" => "kitchin-login"
    )

    ingress do
      permission :tcp, 22..22 do
        ip_ranges(
          "210.227.234.114/32"
        )
      end
    end

    egress do
      permission :any do
        ip_ranges(
          "0.0.0.0/0"
        )
      end
    end
  end
end
